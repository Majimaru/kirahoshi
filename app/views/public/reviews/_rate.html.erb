<div class="col-5 px-0" id="rate_<%= post_de.id %>"></div>

<script>
  $(document).on('turbolinks:load', function() {
    // これがないとブラウザバックで星が増え続ける不具合が発生
    $('#rate_<%= post_de.id %>').empty();
    // scriptファイルをどのidの部分に配置するかを指定
    let elem = document.querySelector('#rate_<%= post_de.id %>');
    let opt = {  
      //星画像の指定などのオプションをここに記述,
      starOff:  '<%= asset_path('star-off.png') %>',
      starOn : '<%= asset_path('star-on.png') %>',
      starHalf: "<%= asset_path('star-half.png') %>",
      // bookモデルのstarカラムへ値を保存という意味になる
      scoreName: 'review[rate]',
      // 今回は５段階評価で星半分評価は入力できるように設定
      half: true,
     };
    raty(elem,opt);
  });
</script>